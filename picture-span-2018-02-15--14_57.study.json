{
  "version": [
    2017,
    1,
    5
  ],
  "components": {
    "1": {
      "id": "1",
      "type": "lab.flow.Loop",
      "children": [
        "5"
      ],
      "templateParameters": {
        "columns": [
          {
            "name": "span_length",
            "type": "string"
          },
          {
            "name": "",
            "type": "string"
          },
          {
            "name": "",
            "type": "string"
          }
        ],
        "rows": [
          [
            "2",
            "",
            ""
          ],
          [
            "2",
            "",
            ""
          ],
          [
            "3",
            "",
            ""
          ],
          [
            "3",
            "",
            ""
          ],
          [
            "4",
            "",
            ""
          ],
          [
            "4",
            "",
            ""
          ],
          [
            "5",
            "",
            ""
          ],
          [
            "5",
            "",
            ""
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "title": "Picture span task",
      "_tab": "Content"
    },
    "2": {
      "id": "2",
      "type": "lab.flow.Loop",
      "children": [
        "3"
      ],
      "templateParameters": {
        "columns": [
          {
            "name": "picture",
            "type": "string"
          }
        ],
        "rows": [
          [
            "apple"
          ],
          [
            "flag"
          ],
          [
            "comb"
          ],
          [
            "owl"
          ],
          [
            "moon"
          ],
          [
            "pot"
          ],
          [
            "flower"
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "Generate span",
              "message": "before:prepare",
              "code": "/*\n  This code generates the stimulus sequence manually\n  from the stimuli specified in the loop content.\n  This wouldn't usually be necessary: The loop\n  can sample and shuffle stimuli itself; however,\n  doing it ourselves gives us a bit more control.\n  Specifically, it's (slightly) easier to capture \n  and store the sequence of digits (see below).\n*/\n\n// Subsample the loop parameters by drawing randomly\n// from the loop contents\nthis.options.templateParameters = this.random.sample(\n  this.options.templateParameters,\n  this.aggregateParameters.span_length\n)\n\n// Extract the presented stimuli and store them seperately,\n// as a feature of the overall trial sequence.\nthis.parent.options.parameters.span = \n  this.options.templateParameters.map(\n    function(repetition) { return repetition.picture }\n  )"
            }
          ]
        ]
      },
      "title": "Learning phase",
      "shuffle": false,
      "_tab": "Scripts"
    },
    "3": {
      "id": "3",
      "type": "lab.html.Screen",
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "Disable data logging",
              "message": "before:prepare",
              "code": "// We don't need screen-by-screen data for\n// the stimulus presentation\nthis.options.datacommit = false"
            }
          ]
        ]
      },
      "title": "Picture presentation",
      "content": "<main\n  class=\"content-horizontal-center content-vertical-center\"\n>\n  \n  <img src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/${ parameters.picture }.png\">\n\n</main>\n<footer>\n  Please memorize the picture presented above.\n</footer>",
      "_tab": "Scripts",
      "timeout": "1500"
    },
    "4": {
      "id": "4",
      "type": "lab.html.Screen",
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "Handle button responses",
              "message": "before:prepare",
              "code": "// Create an empty array that collects responses\nthis.data.responses = []\n\n// Setup handler for button clicks\nthis.options.events['click button'] = function(event) {\n  // Which button was clicked?\n  const button = event.target.attributes.name.value\n\n  // Terminate screen if participant is done,\n  // otherwise log response, deactivate button,\n  // and continue.\n  if (button === 'done') {\n    this.end('done')\n  } else {\n    // Add response to data\n    this.data.responses.push(button)\n    \n    // Disable button\n    event.target.disabled = true\n  }\n}"
            }
          ],
          [
            {
              "title": "Code veracity of answer",
              "message": "after:end",
              "code": "// The response was correct if every presented stimulus\n// matched the corresponding response\n// (JavaScript, sadly, can't directly compare two arrays)\nthis.data.correct = this.aggregateParameters.span.every(\n  (picture, index) => picture === this.data.responses[index]\n)"
            }
          ]
        ]
      },
      "title": "Recall",
      "content": "<main class=\"content-horizontal-center content-vertical-center\">\n  <!-- Table styles are specified in the overall study CSS,\n       please see study options. This screen also includes\n       a fair amount of logic, which is visible in the scripts\n       tab. Please be invited to ask the authors if you have\n       any questions!\n  -->\n  <table class=\"table-plain table-span-recall\">\n    <tr>\n      <td>\n        <button name=\"1\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/apple.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n      <td>\n        <button name=\"2\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/flag.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n      <td>\n        <button name=\"3\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/comb.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n      <td>\n        <button name=\"4\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/owl.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n      <td>\n        <button name=\"5\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/flower.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n      <td>\n        <button name=\"6\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/pot.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n      <td>\n        <button name=\"7\">\n          <img \n            src=\"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/moon.png\"\n            style=\"max-width: 100px\"\n          >\n        </button>\n      </td>\n          \n    </tr>\n    <tr>\n      <td colspan=\"7\">\n        <button name=\"done\">\n          Done &rarr;\n        </button>\n      </td>\n    </tr>\n  </table>\n</main>\n<footer>\n  Please select the pictures you just saw, in the order they were presented.<br>\n  When you have chosen all you can recall, please click <kbd>Done</kbd> to continue.\n</footer>",
      "_tab": "Scripts"
    },
    "5": {
      "id": "5",
      "type": "lab.flow.Sequence",
      "children": [
        "6",
        "2",
        "12",
        "4"
      ],
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "title": "Trial sequence for Recall",
      "_tab": "Content"
    },
    "6": {
      "id": "6",
      "type": "lab.html.Screen",
      "responses": {
        "rows": [
          [
            "continue",
            "click",
            "button#continue",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "title": "Get-set-go",
      "content": "<main class=\"content-vertical-center content-horizontal-center\">\n  <div style=\"max-width: 600px\">\n    <h2>Ready?</h2>\n    <p>In a moment, we're going to show you a sequence of pictures. Please try to remember them as best you can, you'll be asked to recall them in the order in which they were presented.</p>\n    <p>When you're ready, please press <kbd>Continue</kbd> below.\n  </div>\n</main>\n<footer class=\"content-horizontal-right\">\n  <button id=\"continue\">\n    Continue &rarr;\n  </button>\n</footer>",
      "_tab": "Content"
    },
    "7": {
      "id": "7",
      "type": "lab.flow.Loop",
      "children": [
        "8"
      ],
      "templateParameters": {
        "columns": [
          {
            "name": "picture",
            "type": "string"
          }
        ],
        "rows": [
          [
            "apple"
          ],
          [
            "flag"
          ],
          [
            "comb"
          ],
          [
            "owl"
          ],
          [
            "moon"
          ],
          [
            "pot"
          ],
          [
            "flower"
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "Preload images",
              "message": "before:prepare",
              "code": "this.options.media.images = [\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/apple.png',\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/flag.png',\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/comb.png',\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/owl.png',\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/moon.png',\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/pot.png',\r\n  'https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/flower.png'\r\n]"
            }
          ]
        ]
      },
      "title": "Practice Picture Naming",
      "_tab": "Content"
    },
    "8": {
      "id": "8",
      "type": "lab.html.Screen",
      "responses": {
        "rows": [
          [
            "yes",
            "keypress",
            "",
            "y"
          ],
          [
            "no",
            "keypress",
            "",
            "n"
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "title": "Picture Presentation",
      "content": "<main>\r\n  <img src= \"https://cdn.rawgit.com/lsuemily/PictureSpanTask/7ca73f48/images/${ parameters.picture }.png\">\r\n</main>",
      "_tab": "Content",
      "timeout": ""
    },
    "9": {
      "id": "9",
      "type": "lab.flow.Loop",
      "children": [
        "1"
      ],
      "templateParameters": {
        "columns": [
          {
            "name": "timing",
            "type": "string"
          },
          {
            "name": "",
            "type": "string"
          }
        ],
        "rows": [
          [
            "immediate",
            ""
          ],
          [
            "delayed",
            ""
          ]
        ]
      },
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "title": "Counterbalancing Loop",
      "shuffle": true
    },
    "10": {
      "id": "10",
      "type": "lab.html.Screen",
      "responses": {
        "rows": [
          [
            "b to continue",
            "keypress",
            "",
            "b"
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "title": "Welcome",
      "content": "<header>\r\n  <h1>Welcome!</h1>\r\n</header>\r\n<main> \r\n  <p>We are going to play a picture game with you. In the first part, we just want you to say the name of some pictures that you see. Then later, we will ask you to remember the pictures.</p>\r\n  <br>\r\n  <br>\r\n  <p> A note to the person playing the game with you- please remember to press the \"y\" key if they name the picture, and the \"n\" key if they do not. </p>\r\n</main>\r\n<footer>\r\n  Press the \"b\" key to continue.\r\n</footer>\r\n",
      "_tab": "Content"
    },
    "12": {
      "id": "12",
      "type": "lab.canvas.Screen",
      "content": [
        {
          "type": "i-text",
          "originX": "center",
          "originY": "center",
          "left": 0,
          "top": 0,
          "width": 158.95,
          "height": 36.16,
          "fill": "black",
          "stroke": null,
          "strokeWidth": 1,
          "strokeDashArray": null,
          "strokeLineCap": "butt",
          "strokeLineJoin": "round",
          "strokeMiterLimit": 10,
          "scaleX": 1,
          "scaleY": 1,
          "angle": 0,
          "flipX": false,
          "flipY": false,
          "opacity": 1,
          "shadow": null,
          "visible": true,
          "clipTo": null,
          "backgroundColor": "",
          "fillRule": "nonzero",
          "globalCompositeOperation": "source-over",
          "transformMatrix": null,
          "skewX": 0,
          "skewY": 0,
          "text": "Visor down!",
          "fontSize": 32,
          "fontWeight": "normal",
          "fontFamily": "Times New Roman",
          "fontStyle": "normal",
          "lineHeight": 1.16,
          "underline": false,
          "overline": false,
          "linethrough": false,
          "textAlign": "center",
          "textBackgroundColor": "",
          "charSpacing": 0,
          "id": "74",
          "styles": {}
        }
      ],
      "responses": {
        "rows": [
          [
            "",
            "",
            "",
            ""
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "viewport": [
        800,
        600
      ],
      "title": "Visor Instruction for delay",
      "_tab": "Content",
      "timeout": "15,000"
    },
    "13": {
      "id": "13",
      "type": "lab.canvas.Screen",
      "content": [
        {
          "type": "i-text",
          "originX": "center",
          "originY": "center",
          "left": 0,
          "top": 0,
          "width": 753.44,
          "height": 329.78,
          "fill": "black",
          "stroke": null,
          "strokeWidth": 1,
          "strokeDashArray": null,
          "strokeLineCap": "butt",
          "strokeLineJoin": "round",
          "strokeMiterLimit": 10,
          "scaleX": 1,
          "scaleY": 1,
          "angle": 0,
          "flipX": false,
          "flipY": false,
          "opacity": 1,
          "shadow": null,
          "visible": true,
          "clipTo": null,
          "backgroundColor": "",
          "fillRule": "nonzero",
          "globalCompositeOperation": "source-over",
          "transformMatrix": null,
          "skewX": 0,
          "skewY": 0,
          "text": "Please spend some time getting comfortable in the\nspace helmet. We want you to try putting the visor down.\nThen, we want you to raise the visor. We will say, \"visor\nup!\". Let's give it a try.\n\n\nExperimenter, please press the \"b\" key when you are ready\nto move on.",
          "fontSize": 32,
          "fontWeight": "normal",
          "fontFamily": "Times New Roman",
          "fontStyle": "normal",
          "lineHeight": 1.16,
          "underline": false,
          "overline": false,
          "linethrough": false,
          "textAlign": "center",
          "textBackgroundColor": "",
          "charSpacing": 0,
          "id": "82",
          "styles": {}
        }
      ],
      "responses": {
        "rows": [
          [
            "end visor practice",
            "keypress",
            "",
            "b"
          ]
        ]
      },
      "messageHandlers": {
        "rows": [
          [
            {
              "title": "",
              "message": "",
              "code": ""
            }
          ]
        ]
      },
      "viewport": [
        800,
        600
      ],
      "title": "Visor Practice",
      "_tab": "Content"
    },
    "root": {
      "id": "root",
      "title": "root",
      "type": "lab.flow.Sequence",
      "children": [
        "10",
        "7",
        "13",
        "9"
      ],
      "plugins": [
        {
          "type": "lab.plugins.Metadata"
        }
      ],
      "metadata": {
        "title": "Picture span",
        "description": "This study implements a short-term memory test. Participants are asked to recall a series of pictures in sequence.",
        "repository": "",
        "contributors": "Emily Elliot"
      }
    }
  },
  "files": {
    "files": {
      "index.html": {
        "content": "data:text/html,%3C!doctype%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%20%3Ctitle%3EExperiment%3C%2Ftitle%3E%0A%20%20%3C!--%20lab.js%20library%20and%20default%20styles%20--%3E%0A%20%20%3Cscript%20src%3D%22lib%2Flab.js%22%3E%3C%2Fscript%3E%0A%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22lib%2Flab.css%22%3E%0A%20%20%3C!--%20study%20code%20and%20styles%20--%3E%0A%20%20%3Cscript%20defer%20src%3D%22script.js%22%3E%3C%2Fscript%3E%0A%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22style.css%22%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%3C!--%20If%20you'd%20rather%20have%20a%20container%20with%20a%20fixed%20width%0A%20%20%20%20%20%20%20and%20variable%20height%2C%20try%20removing%20the%20fullscreen%20class%20below%20--%3E%0A%20%20%3Cdiv%20class%3D%22container%20fullscreen%22%20data-labjs-section%3D%22main%22%3E%0A%20%20%20%20%3Cmain%20class%3D%22content-vertical-center%20content-horizontal-center%22%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Ch2%3ELoading%20Experiment%3C%2Fh2%3E%0A%20%20%20%20%20%20%20%20%3Cp%3EThe%20experiment%20is%20loading%20and%20should%20start%20in%20a%20few%20seconds%3C%2Fp%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fmain%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A",
        "permanent": true
      },
      "style.css": {
        "content": "data:text/css,%2F*%20Span%20recall%20screen%20*%2F%0Atable.table-span-recall%20%7B%0A%20%20max-width%3A%20600px%3B%0A%7D%0A%0Atable.table-span-recall%20tr%3Afirst-child%20button%20%7B%0A%20%20width%3A%20150px%3B%0A%20%20height%3A%20180px%3B%0A%20%20font-size%3A%202.25rem%3B%0A%20%20%2F*%20Animate%20opacity%20*%2F%0A%20%20transition%3A%20opacity%202.25s%20ease-in-out%200%3B%0A%7D%0A%0A%0Atable.table-span-recall%20tr%3Afirst-child%20button%3Adisabled%20%7B%0A%20%20opacity%3A%200.25%3B%0A%7D",
        "permanent": true
      }
    },
    "bundledFiles": {
      "lib/lab.js": {
        "type": "application/javascript"
      },
      "lib/lab.js.map": {
        "type": "text/plain"
      },
      "lib/lab.css": {
        "type": "text/css"
      },
      "lib/loading.svg": {
        "type": "image/svg+xml"
      }
    }
  }
}